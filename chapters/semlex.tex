%!TEX root = ../disertace.tex
%!TEX encoding = UTF-8 Unicode

\chapter{SemLex}
\label{sec:semlex}

\section{Building SemLex – based on the JLRE article}
\label{sec:semlex:build}
Each entry we add into SemLex is considered to be a monosemic MWE. 
We have also added nine special entries to identify NE types, so we do not need to add all the expressions themselves.

\section{Named entities}
\label{sec:semlex:ne}
\emph{Named entities} are a concept originating in information retrieval (??, quote). This concept is well rooted in NLP but it does not exist in classical lexicology and its defining criteria do not correspond with a definition of a lexical unit, lexeme, or any other lexicological or lexicographic concept of our knowledge.

We used the NE classification by \citet{sevcikova:2007} as a starting point. However the definition of what the named entities are is problematic:
\begin{quote}
\textczech{\em „Pojmenované entity jsou jednotlivá slova nebo slovní spojení, která v textu vystupují jako
pojmenování osob, míst, firem apod. Cílem anotace je označení všech pojmenovaných entit v 
předloženém lineárním textu. Současná anotace bude zaměřena na identifikaci
především těch pojmenovaných entit, které jsou zapsány s velkým počátečním písmenem.“}
\end{quote}
The definition basically says that named entities are single- or multi-word units that are used to name persons, locations, firms, etc. I.e. named entities are the expressions used to name entities. It is actually hard to call this a definition at all.

It is nevertheless not easy to define named entities properly. Other authors do not fare much better: \xxx{definice sem!}

We believe we can provide at least some additional constraints to the definition above: To be considered a named entity an expression must share at least some \xxx{(or all ??)} \emph{features of idioms}: it cannot be an exploitation \citep[see][]{hanks:norms}, i.e. it must fulfill some criteria of stability. \xxx{Any more??}

Our types of entities are:
\begin{compactenum}
\item ``a~name of a person or an animal'', 
\item``institution'', 
\item``location'', 
\item``other object'' (used for names of books, units of measurement, biological names of plants and animals), 
\item``address'', 
\item``time'', 
\item``bibliographic entry'', 
\item``foreign expression'' and 
\item``other entity''
\end{compactenum}

Compared to the original, the classification is altered because we do not use embedded entities. In the original, \citeauthor{sevcikova:2007} use a bracketing approach, in which entities of all types are further structured into smaller parts. We also altered some rules for classifying particular types of entities as follows:
\begin{itemize}
\item  We do not distinguish \emph{names of animals} as a distinct type. Animal names are considered the same type as the names of persons.
\item We also merge the \emph{names of media} (newspapers, TV stations, \ldots) with names of companies. The reasons are mainly: a) it seems arbitrary to distinguish specifically names of media. b) It is also often hard to distinguish whether a name is a name of media or a company that owns or runs the media. At the same time there is usually little reason to try to make this distinction.
\item \emph{Numbers with non-quantifying meaning} are merged with addresses. Since the subtypes defined for this type are \code{zip code}, \code{street number} and \code{phone/fax number}, this merge is quite natural, especially since these occur mostly as parts of addresses and we do not annotate any embedded entities.
\end{itemize}

Some frequent names of persons, institutions or other objects (e.g.~film titles) are being added into SemLex during annotation (while keeping the information about their NE type), because this allows for their following occurrences to be pre-annotated automatically (see Section~\ref{sec:annot:pre}). For others, such as common addresses or bibliographic entries, it makes but little sense, because they most probably will not reappear during the annotation. 

\section{Lexemes from other dictionaries}
\label{sec:semlex:dicts}
The base of \semlex\ has been composed of MWEs extracted from Czech WordNet \citep{smrz:03}, Eurovoc \citep{eurovoc:07} and Dictionary of Czech Phraseology and Idiomatics \citep{cermak:1988}.%
For the explanation of our use of the SČFI subset see point \ref{pre-hnatkova} in Section~\ref{sec:annot:pre} below. 
\xxx{update: Currently there are 32196 MWEs in SemLex (po sliti a dokonceni davky 42).}

\xxx{In the current ``compiled'' SemLex there are many collocations that can hardly be considered MWEs. However, these frequently occurring collocations are pragmatically quite useful and it may be good to identify them, too.\footnote{We would like to mark these entries in SemLex at some point, so that we know these in fact are not MWEs and we do not attempt to create a single t-node for them when they are annotated.} The most important thing is to ensure that they are annotated consistently. They can be useful for machine translation, because, e.g., for those collocations that were extracted from Czech WordNet, there are at our disposal their translations into English (CWN). For the collocations that come from Eurovoc we even have translations into all the official languages of the European Union.}

The entries added by annotators must have defined their ``sense''. Annotators define it informally (as well as possible) and we extract an example of usage and the basic form from the annotation automatically. The ``sense'' information will be revised by a lexicographer, based on annotated occurrences.

\subsubsection{Eurovoc}
\label{sec:semlex:eurovoc}

\subsubsection{CWN2a}
\label{sec:semlex:cwn}

\subsubsection{SČFI}
\label{sec:semlex:scfi}


\section{Structure of \semlex}

From the technical point of view, \semlex\ is a simple list of entries. It is stored in YAML format, which makes it easily readable in its source form using any Unicode-aware text editor. Since YAML is a data serialization format and not a markup language, it can also store information needed to represent data as objects in the Perl OO model. 

In addition to the \semlex\ itself we also build an index of basic forms on some special occasions. It is not needed during annotation, so we do not create the index normally but it can be called by passing a second parameter\footnote{The parameter is evaluated as a BOOL type.} to the function \verb=SemLex::load_yaml()=. 

\subsection{\semlex\ entry}
\label{sec:semlex:entry}
An entry is composed of several user-editable attributes, and some read-only and machine-generated metadata:\footnote{By ``user-editable'' we mean editable in \seman. Everything is of course editable in the YAML source format using a text editor, but that is not what a typical user that we have in mind does.} 
\begin{verbatim}
  - !!perl/hash:SemLex_heslo 
    BASIC_FORM: vysoké kruhy
    CREATED: 070115163056
    EXAMPLE: ''
    GLOSS: ''
    ID: 0000017495
    LEMMATIZED: vysoký kruh
    MODIFIED: 090607124212
    MODIFIER: merger
    MORPHO_TAGS: AAIP2----3A---- NNIP2-----A----
    ORIGID: ''
    POS: ''
    SOURCE: SCFI
    SYNONYMS: []
    TREE_STRUCT: "--- []\n\n"
\end{verbatim}

\begin{description} % atributes of a SemLex entry
\item [- !!perl/hash:SemLex\textunderscore{}heslo] -- The first line of a \semlex\ entry provides a lot of information. We describe its parts from the left to the right:
    \begin{description}
    \item [- ]The hyphen at the beginning of the line, together with indentation of the lines that follow, indicates that this is an array element in YAML. Remember that we said that SemLex is a simple list of its entries. Thus we chose to implement is with an array, as it is both sufficient and very efficient.
    \item [!!perl] This string says that the array element actually represents a serialisation of a Perl object.
    \item [/hash] The object is implemented as a hash.
    \item [:Semlex\textunderscore{}heslo] The object belongs to the class Semlex\textunderscore{}heslo.
  \end{description}
\item [BASIC\textunderscore{}FORM] -- The basic form of a lexeme. We could call it a ``lemma'' of a lexeme, but we do not find it suitable for several reasons: 
  \begin{itemize}
    \item In many languages including Czech it often contains word forms in other than the basic form for the given word on its own. I.e. ``vysoké učení'' contains a feminine suffix of the adjective ``vysoký'' (high) because of the required agreement in gender with the noun, whereas the traditional lemma of adjectives in Czech is in the masculine form.
    \item  It could be confused with the attribute ``lemmatized'' that means something completely different.
  \end{itemize}

\item [EXAMPLE] -- An example sentence or collocation that illustrates the prevalent use of the MWE

\item [GLOSS] -- Primarily used for an explanation of the MWE, much like in traditional dictionaries.

Secondary use of this attribute is for additional notes or processing instructions. Annotators put specially formated notes into this field to mark that the entry has some special property that we do not have an attribute for, that the entry should be removed, or they could indicate that they have just some other note for the entry. This secondary use of GLOSS and  the type of note was marked by special format of the beginning of the note:
    \begin{description}
    \item [\code{***(<type>)}] -- The entry is a NE that the user wants to add into \semlex. The usual reason is that the NE is common in the annotated text. When it is added into \semlex, it can be pre-annotated automatically more efficiently (see \Sref{sec:annot:pre} for details). \code{<type>} means that at this place there is a name of one of the types of NEs as described in \Sref{sec:semlex:ne}.\footnote{The notes actually use Czech names of these types.} 
    \item [\code{***derived from: <ID>}] -- The entry is derived from another entry that already exists in \semlex. \xxx{popsat, rozsirit. Nemela by to byt subsekce a odkaz?}
        \item [\code{***remove}] -- The entry is not a MWE, thus its instances should not be annotated and the entry should be removed from \semlex.
        \item [\code{***<anything else>}] -- Other notes. The entry must be inspected and something (other than removing it) must be done.
  \end{description}
  
\item [LEMMATIZED] -- ``Lemmatised \code{BASIC\textunderscore{}FORM}'', i.e. take the basic form of an entry and substitute each form with its morphological lemma. This attribute is used for pre-annotation of entries that have not been annotated yet, so their tree structure has yet to be identified. For more details see Section~\ref{sec:annot:pre}  on page \pageref{sec:annot:pre}.\label{lem}

\item [MODIFIER] -- For newly created entries, this attribute is empty regardless whether they were created by modifying entries from other dictionaries during original creation of SemLex, or whether they were created by annotators during annotation. Is is used to mark that the entry was modified after its creation and who last modified the entry. See \ref{lem}

\item [MORPHO\textunderscore{}TAGS] -- Morphological tags corresponding to the \code{BASIC\textunderscore{}FORM}. The tags were acquired automatically by running the morphological tagger of Jan Hajič (\citeyear{hajic:2004}). This is a suplementary information that has not been used during later stages of annotation. It was implemented for pre-annotation using only morphological layer or alternativelly only plain text and morphological tagger. After some initial testing we have not used this pre-annotation, so it does not appear in \Sref{sec:annot:pre} and it is not implemented in current \seman\ workflow. 

The morphological tags could however still prove useful if \semlex\ should be used for annotatiuon of resources without tectogrammatical layer. Then it could be useful to employ this type of simpler pre-annotation.

\item [ORIGID] -- If the entry comes from some other existing dictionary, this is the original ID of the entry in that source dictionary (identified by the attribute \code{SOURCE}).

\item [POS] -- The part of speech of the entry as a unit. Usually it corresponds to the part of speech of the syntactic head of the entry in terms of the underlying tectogrammatic tree structure, but there are some exceptions:
% POSes:
  \begin{description}
    \item [N] -- noun; 
    \item [A] -- adjective; \pr{trvale udržitelný, ekonomicky aktivní, do očí bijící}
    \item [V] -- verb; \pr{působit jako blesk z čistého nebe (\xxx{really???}), zaujmout stanovisko, mít dohled, spadl (komu) kámen ze srdce}
    \item [D] -- adverb; e.g. \pr{mezi čtyřma očima, na lavičce\footnote{Trenér Borovička se zatím nerozhodl, zda král střelců Siegl začne v základní sestavě, nebo zase jen na lavičce.}}, or \pr{o dům dál}
    \item [I] -- interjection;
    \item [F] -- foreign; often Latin, Greek, but also other idioms that are already ``native'' to the Czech language enough to include them in a dictionary instead of annotating them just as a foreign entity, e.g.~\pr{hip hop, a la, de iure}.
    \item [N/A] -- not applicable; used for proverbs, sayings, other idioms forming whole sentences, or idioms with unclear part of speech, e.g. \pr{stručně řečeno; stal se kozel zahradníkem, Tady je dobrá rada drahá.}
  \end{description} % end POSes

The entries in the original \scfi\ do not carry the information on the part of speech, so we were not able to fill the attribute in the beginning. Thus the entries from \scfi\ have the POS information only in case they were manually edited. In that case the POS is always added, because the \seman\ interface does not allow the edited entry to be saved without indicating the part of speech.\footnote{For details of the \seman\ user interface to \semlex\ see \Sref{sec:seman:gui}.} % end of item [POS]

\item [SOURCE] -- Where did the entry come from. Possible values are {\tt CWN2a}, {\tt Eurovoc}, {\tt SCFI}, or {\tt <annotator>}. {\tt <annotator>} means that the entry was created during annotations and stands for an identifier of the annotator who created it. An annotator found a MWE, searched the \semlex\ for the expression, and decided a new entry is needed. When the entry is created, the annotator's identifier is written as the SOURCE. This attribute is used to trace the origin of entries during analysis of annotations and when merging individual annotators' SemLexes. 

When the entry is a result of merging several entries from different sources (either different source dictionaries or several annotators created the same entry), the value is a concatenation of the sources. In case that automatic merge was not possible \code{SOURCE} 

\item [SYNONYMS] -- A list of synonyms (implemented as an array). In case of Entries from WordNet, the synsets were split to individual entries, but the relation between them was kept via the ORIGID attribute and the basic forms of the synonymous MWEs were copied into this attribute as the synonyms of the MWE. This attribute helps annotators to understand an entry's meaning, especially since most synsets in the WordNet did not have any glosses or examples. See \Sref{sec:semlex:cwn} for more information on entries derived from WordNet. Occasionally annotators added synonyms manually, if they just happened to think about them when using an entry. It was however by no means systematic work and it was not one of the goals of annotation.

\item [TREE\textunderscore{}STRUCT] -- The tree structure of an entry. This is a simplified tectogrammatic representation of the entry and is a key to the most advanced pre-annotation that we employ: identification of future occurrences of the same tree structure in the text. This pre-annotation requires \ntred. See discussion of various types of pre-annotation in \Sref{sec:annot:pre}.

\end{description} % end - attributes of a SemLex entry


%%%%%%%%%
\section{Zajímavá hesla -- provizorni}
Some entries seem at the first look just wrong. A class of automobiles is a perfectly compositional collocation with clear syntactic structure, isn't it? However ``automobil nižší střední třídy'' is a different matter.
\begin{verbatim}
 - !!perl/hash:SemLex_heslo 
    BASIC_FORM: třída automobilů
    CREATED: 070926062821
    EXAMPLE: ~
    GLOSS: ~
    ID: 0000003520
    LEMMATIZED: třída automobil
    MODIFIED: 070926062833
    MODIFIER: sidak
    MORPHO_TAGS: ~
    ORIGID: ~
    POS: 'N'
    SOURCE: sidak
    SYNONYMS: []
    TREE_STRUCT: ''
\end{verbatim}

Creative use -- exploitation (Hanks). Very common in journalism. PDT is composed of daily news, so expolitations of this kind are quite common in our data too.
\begin{verbatim}
  - !!perl/hash:SemLex_heslo 
    BASIC_FORM: mezi osmi očima
    CREATED: 100622025530
    EXAMPLE: ~
    GLOSS: "***derived from 0000032132 (mezi čtyřma očima)"
    ID: 0000032133
    LEMMATIZED: mezi osm oko
    MODIFIED: ~
    MODIFIER: bejcek
    MORPHO_TAGS: ''
    ORIGID: ~
    POS: 'D'
    SOURCE: vimmrova
    SYNONYMS: []
    TREE_STRUCT: ''
\end{verbatim}

\subsection{Partial freedom in an idiom}
\pr{(rozčeřit | rozhýbat) stojaté vody}. Here it is (based on our data and knowleadge) only these two alternatives on this one position. However some idioms show much richer variation and the relations between the alternates are very complex. See \xxx{doplnit.} Due to the complex nature of these alternations we have kept the variants separate. Neither we nor the annotators are trained lexicographers to decide the cases. It would also require completely different setup, searching larger corpora, etc. The efficient approach during annotations was to create separate entries and link them via a special form of gloss, as below.  Thus we do not loose any information and leave it to the lexicographers to come up with a good description of the complex relations of these variants.
\begin{verbatim}
  - !!perl/hash:SemLex_heslo 
    BASIC_FORM: rozčeřit stojaté vody
    CREATED: 100622030630
    EXAMPLE: ~
    GLOSS: "souvisí s 0000029189 (rozhýbat st.v.)"
    ID: 0000032134
    LEMMATIZED: rozčeřit stojatý voda
    MODIFIED: ~
    MODIFIER: bejcek
    MORPHO_TAGS: ''
    ORIGID: ~
    POS: 'V'
    SOURCE: vimmrova
    SYNONYMS: []
    TREE_STRUCT: ''
\end{verbatim}

\pr{sloužit mši} je idiomatický rámec i ve Vallexu. Takovych je v nasich datech urcite mnohem vic -- \xxx{relation of our data to Vallex and PDTVallex}
\medskip

These should probably have been two entries -- for two POS'. \xxx{Jak je zpracované heslo 'postižený' v PDTVallexu?}
\begin{verbatim}
  - !!perl/hash:SemLex_heslo
    BASIC_FORM: zdravotně postižený
    CREATED: 080408072653
    EXAMPLE: ~
    GLOSS: subst. i adj.
    ID: 0000031992
    LEMMATIZED: zdravotně postižený
    MODIFIED: 100502113206
    MODIFIER: sidak_vimmrova_sidaklexicographer_vimmrova_sidaklexicographer
    MORPHO_TAGS: ''
    ORIGID: ''
    POS: N i A
    SOURCE: sidak_vimmrova
    SYNONYMS: ~
    TREE_STRUCT: ''  
    \end{verbatim}
