<?xml version="1.0" encoding="utf-8"?>
<pml_schema xmlns="http://ufal.mff.cuni.cz/pdt/pml/schema/" version="1.1">
  <description>PDT 2.0 sense (WSD) annotation</description>
  <reference name="mdata" readas="dom"/>
  <reference name="adata" readas="dom"/>
  <reference name="tdata" readas="dom"/>
  <reference name="lexicon"/> <!-- for SemLex as well as Vallex, etc. -->
  <!-- TODO: For the lexicon used <lexicon> in <s-annotation-info> should be
          referenced!! -->

  <!-- s-node linking a sense to a set of m-nodes -->
  <!-- Mostly used for old annotation of files that don't have t-layer --> 
  <derive name="sm-node.type" type="s-node.type">
    <container type="sm-node-content.type"/>
  </derive>

  <derive name="sm-node-content.type" type="s-node-content.type">
    <sequence name="s-node" content_pattern="(lexicon-id, m.rf*)">
        <element name="m.rf">
            <cdata format="PMLREF"/>
        </element>
    </sequence>
  </derive>

  <!-- s-node linking a sense to a set of a-nodes -->
  <derive name="sa-node.type" type="s-node.type">
    <container type="sa-node-content.type"/>
  </derive>

  <derive name="sa-node-content.type" type="s-node-content.type">
    <sequence name="s-node" content_pattern="(lexicon-id, a.rf*)">
        <element name="a.rf">
            <cdata format="PMLREF"/>
        </element>
    </sequence>
  </derive>

  <!-- s-node linking a sense to a set of t-nodes -->
  <derive name="st-node.type" type="s-node.type">
    <container type="st-node-content.type"/>
  </derive>

  <derive name="st-node-content.type" type="s-node-content.type">
    <sequence name="s-node" content_pattern="(lexicon-id, t.rf*)">
        <element name="t.rf">
            <cdata format="PMLREF"/>
        </element>
    </sequence>
  </derive>

  <root name="sdata">
      <structure>
          <member name="meta" required="1">
              <structure>
                  <member name="annotation_info">
                      <structure name="s-annotation-info">
                          <member name="lexicon" required="1"><cdata format="any"/></member>
                          <member name="annotator" required="1"><cdata format="any"/></member>
                          <member name="version_info"><cdata format="any"/></member>
                          <member name="desc"><cdata format="any"/></member>
                      </structure>
                  </member>
              </structure>
          </member>
          <member name="wsd" required="1">
              <!-- No mixing of references to different layers within one file -->
              <sequence content_pattern="((sm)+|(sa)+|(st)+)">
                  <element name="sm" type="sm-node.type"/>
                  <element name="sa" type="sa-node.type"/>
                  <element name="st" type="st-node.type"/>
              </sequence>
          </member>
      </structure>
  </root>

  <!-- sense node, a type with elements common for all sense nodes -->
  <!--  s-node id is constructed as a concatenation of a file ID and the number
        denoting a lexis instance in the given file.-->
  <type name="s-node.type">
    <container type="s-node-content.type">
      <attribute name="id" role="#ID" required="1"><cdata format="ID"/></attribute>
      
    </container>
  </type>
  <type name="s-node-content.type">

    <sequence name="s-node" content_pattern="(lexicon-id)">
      <element name="lexicon-id"><cdata format="PMLREF"/></element>
    </sequence>

  </type>

</pml_schema>
